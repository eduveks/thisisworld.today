webpackJsonp([4],{Ll6P:function(e){e.exports={home:"home__3qYNQ",map:"map__271y_",videoContainer:"videoContainer__2aPMD",mapMarkerVideoContainer:"mapMarkerVideoContainer__3I8_s",modal:"modal__2vd8M",modalContent:"modalContent__1ALt1",modalClose:"modalClose__1vtSa"}},vy41:function(e,t,o){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=o("KM04"),r=o("Ll6P"),s=o.n(r),l=o("iRqj");o("vCxL"),o("cREt"),o("6CoL"),o("hZYI"),o("J/M7"),o("jun6"),o("67RP"),o("RaFB"),o("Vqo+"),o("I8KM"),o("a+qb"),o("omVc"),o("6+Ke"),o("WXUl"),o("Csd+"),o("Yxey"),o("3nFs"),o("n7Mc"),o("wbS/"),o("Qh4I"),o("rXfM"),o("Qnsq"),o("vsl0"),o("XsKQ"),o("/PJG"),o("5MGD"),o("dNh5"),o("3/LX"),o("dNgG"),o("HQCS"),o("DQig"),o("Nkv4"),o("9kkf"),o("ezNs"),o("+r9t"),o("5MPU"),o("Scvc"),o("Cp6P"),o("9bwY"),o("vT9o"),o("0Zq+"),o("57wB"),o("w9G6"),o("SZK7"),o("FdIu"),o("ff2A");o.d(t,"default",function(){return d});var c=Object(a.h)("div",null),d=function(e){function t(){var t=n(this,e.call(this));return t.mapObservable=Object(l.a)(100),t.mapSubscription=null,t.gMap=null,t.state={gMapsReady:!1,video:null,modalVideo:null},t.modalClose.bind(t),t}return i(t,e),t.prototype.componentWillMount=function(){var e=this;this.mapSubscription=this.mapObservable.subscribe(function(){!0===window.gMapsLoaded&&(e.setState({gMapsReady:!0}),e.mapSubscription.unsubscribe(),e.mapSubscription=null)})},t.prototype.componentDidMount=function(){return new Promise(function(e){var t=this;return window.onclick=function(e){e.target==t.modal&&(t.modal.style.display="none")},e()}.bind(this))},t.prototype.componentWillUnmount=function(){null!=this.mapSubscription&&this.mapSubscription.unsubscribe()},t.prototype.componentDidUpdate=function(){return new Promise(function(e){var t=this;if(this.state.gMapsReady)if(this.gMap=new google.maps.Map(this.map,{zoom:2,center:new google.maps.LatLng(30,0)}),null===this.state.video)!function(){new Promise(function(e,o){var n,i,a;return Promise.resolve(fetch("https://thisisworld-287fb.firebaseio.com/video.json")).then(function(r){try{return n=r,Promise.resolve(n.json()).then(function(n){try{return i=n,a=i||{},t.setState({video:a}),e()}catch(e){return o(e)}},o)}catch(e){return o(e)}},o)})}();else for(var o=Object.entries(this.state.video),n=Array.isArray(o),i=0,o=n?o:o[Symbol.iterator]();;){var a;if(n){if(i>=o.length)break;a=o[i++]}else{if(i=o.next(),i.done)break;a=i.value}var r=a,l=r[1];!function(e,o){var n=new google.maps.Marker({position:{lat:o.latitude,lng:o.longitude},map:t.gMap,title:o.title}),i=new google.maps.InfoWindow({content:"<div><h3>"+o.title+'</h3><div class="'+s.a.videoContainer+" "+s.a.mapMarkerVideoContainer+'"><iframe width="853" height="480" src="'+o.link.replace("watch?v=","embed/")+'" frameborder="0" allowfullscreen></iframe></div></div>'});n.addListener("click",function(){t.gMap.setZoom(6),t.gMap.setCenter(n.getPosition()),i.open(t.gMap,n)})}(0,l)}return e()}.bind(this))},t.prototype.modalClose=function(){this.setState({modalVideo:null})},t.prototype.render=function(){var e=this;return Object(a.h)("div",null,Object(a.h)("div",{ref:function(t){return e.map=t},class:s.a.map}),Object(a.h)("div",{ref:function(t){return e.modal=t},class:s.a.modal,style:{display:null==this.state.modalVideo?"none":"block"},onClick:this.modalClose.bind(this)},Object(a.h)("div",{class:s.a.modalContent},Object(a.h)("span",{class:s.a.modalClose,onClick:this.modalClose.bind(this)},"Ã—"),null!=this.state.modalVideo?Object(a.h)("div",null,Object(a.h)("h3",null,this.state.modalVideo.title),Object(a.h)("div",{class:s.a.videoContainer},Object(a.h)("iframe",{width:"853",height:"480",src:this.state.modalVideo.link.replace("watch?v=","embed/"),frameborder:"0",allowfullscreen:!0}))):c)))},t}(a.Component)}});
//# sourceMappingURL=route-discovery.chunk.83fe3.js.map